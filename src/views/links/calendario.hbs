<div id="booking" class="section" >
  <div class="section-center">
    <div class="container">
      <div class="row">
        <div class="booking-form">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <h5 class="bg-primary fs-5 text-light text-center">CALENDAloRIO</h5>
                <input type="text" id="fecha11" onchange="actdatetime()"/>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <h5 class="bg-primary fs-5 text-light text-center">FILTRAR POR:</h5>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class=" d-flex col-md-12">
          <div class="card-header" id="arrayFechaInHtml"></div>        
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js" integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous">
</script>

<script>
  $(document).ready(() => {
      $('#fecha11').datetimepicker({
          inline: true,
      });
  });

jQuery('#fecha11').datetimepicker({
  format:'Y-m-d',
  inline:true,
  timepicker:false,
  lang:'es',
});
</script>

<script>
  function actdatetime(){
    const fechaselect = document.getElementById('fecha11').value;
    const allEvents = {{{dataeventos}}};

    constructor = "";
    document.getElementById("arrayFechaInHtml").innerHTML = constructor;

    constructor ='<table class="table table-hover"><thead><tr><th>Nombre</th><th>DNI</th><th class="d-none d-md-table-cell">Ultimo Evento</th><th class="d-none d-md-table-cell">Estado</th><th class="d-none d-md-table-cell">Tipo</th><th class="d-none d-md-table-cell">Cita Legal</th><th class="d-none d-md-table-cell">Cita Medica</th><th class="d-none d-md-table-cell">Cita Psico</th><th>Ver Perfil</th><th>Ver Eventos</th><th>OK</th></tr></thead><tbody>';

    const arrayFechaSelec = allEvents.filter(function(evtFecha){
    if (evtFecha.fecha_prox_contacto == fechaselect){
      constructor += '<tr><td>'+evtFecha.nombre_cliente_evt+'</td>'
      constructor += '<td>'+evtFecha.dni_evt+'</td>'
      constructor += '<td>'+evtFecha.fecha_evt+'</td>'
      constructor += '<td>'+evtFecha.estado+'</td>'
      constructor += '<td>'+evtFecha.tipo+'</td>'
      if (evtFecha.fecha_prox_legal != ""){
        constructor += '<td>'+evtFecha.fecha_prox_legal+'</td>'}
      else{constructor += '<td>Sin Fecha</td>'}
        if (evtFecha.fecha_prox_med != ""){
        constructor += '<td>'+evtFecha.fecha_prox_med+'</td>'}
      else{constructor += '<td>Sin Fecha</td>'}
      if (evtFecha.fecha_prox_psico != ""){
        constructor += '<td>'+evtFecha.fecha_prox_psico+'</td>'}
      else{constructor += '<td>Sin Fecha</td>'}
      constructor += '<td>PERFIL</td>'
      constructor += '<td>EVENTOS</td>'
      constructor += '<td>CHECK</td></tr>'}
    return true
    });

  constructor += "</tbody></table>"
  document.getElementById("arrayFechaInHtml").innerHTML = constructor;
}
</script>

